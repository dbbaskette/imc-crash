spring:
  application:
    name: crash-orchestrator

  # JPA/Database configuration
  datasource:
    url: ${DATABASE_URL:jdbc:postgresql://localhost:5432/crash}
    username: ${DATABASE_USERNAME:crash}
    password: ${DATABASE_PASSWORD:crash}
    driver-class-name: org.postgresql.Driver
  jpa:
    hibernate:
      ddl-auto: update
    show-sql: false
    properties:
      hibernate:
        dialect: org.hibernate.dialect.PostgreSQLDialect

  # Spring AI configuration
  ai:
    openai:
      api-key: ${OPENAI_API_KEY:}
      base-url: https://api.openai.com/v1
      chat:
        options:
          model: ${OPENAI_MODEL:gpt-5-nano}
          temperature: ${OPENAI_TEMPERATURE:0.3}
    anthropic:
      api-key: ${ANTHROPIC_API_KEY:}
      chat:
        options:
          model: ${ANTHROPIC_MODEL:claude-3-5-sonnet-20241022}
          temperature: ${ANTHROPIC_TEMPERATURE:0.3}
        connection-timeout: 30s
        read-timeout: 120s
    google:
      genai:
        api-key: ${GOOGLE_API_KEY:}
        chat:
          options:
            model: ${GOOGLE_MODEL:gemini-2.5-flash}
            temperature: ${GOOGLE_TEMPERATURE:0.3}
    mcp:
      client:
        enabled: true
        type: SYNC
        request-timeout: 120s
        toolcallback:
          enabled: true
        streamable-http:
          connections:
            impact-analyst:
              url: ${MCP_IMPACT_ANALYST_URL:http://localhost:8081}
              endpoint: /mcp
            environment:
              url: ${MCP_ENVIRONMENT_URL:http://localhost:8082}
              endpoint: /mcp
            policy:
              url: ${MCP_POLICY_URL:http://localhost:8083}
              endpoint: /mcp
            services:
              url: ${MCP_SERVICES_URL:http://localhost:8084}
              endpoint: /mcp
            communications:
              url: ${MCP_COMMUNICATIONS_URL:http://localhost:8085}
              endpoint: /mcp

# Embabel agent configuration
embabel:
  models:
    default-llm: gemini-2.5-flash
  agent:
    platform:
      scanning:
        packages: com.embabel.agent,com.insurancemegacorp.crash.orchestrator

# Server configuration
server:
  port: ${PORT:8080}

# Actuator/Management endpoints
management:
  endpoints:
    web:
      exposure:
        include: health,info,metrics,prometheus
  endpoint:
    health:
      show-details: always
  metrics:
    tags:
      application: ${spring.application.name}

# Logging
logging:
  level:
    com.insurancemegacorp: ${LOG_LEVEL:INFO}
    com.embabel: INFO
    org.springframework.ai: DEBUG
    org.springframework.ai.openai: TRACE
    org.springframework.web.client: DEBUG
