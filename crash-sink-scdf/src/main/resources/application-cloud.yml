spring:
  cloud:
    service-registry:
      auto-registration:
        enabled: true
        register-management: true
        fail-fast: false

# Eureka client for SCDF service discovery
eureka:
  client:
    enabled: ${EUREKA_ENABLED:true}
    serviceUrl:
      defaultZone: ${EUREKA_SERVICE_URL:http://localhost:8761/eureka/}
  instance:
    preferIpAddress: true
    hostname: ${CF_INSTANCE_INTERNAL_IP:localhost}

# Cloud-specific logging
logging:
  level:
    com.insurancemegacorp: INFO
    org.springframework.cloud.stream: DEBUG
    org.springframework.cloud.netflix.eureka: DEBUG
  pattern:
    console: "%d{yyyy-MM-dd HH:mm:ss.SSS} [%thread] %-5level [%X{traceId:-},%X{spanId:-}] %logger{36} - %msg%n"

# More detailed health info for CF
management:
  endpoints:
    web:
      exposure:
        include: health,metrics,info,env,configprops,discovery,prometheus
